Conversation 1:
```
Based on your stack, you need to configure MCP tool permissions at both the **server configuration level** and **Claude's permission policy**. Here's how to set it up:

## 1. MCP Server Configuration (mcp.json)

For each browser tool, configure allowed origins in your MCP server config:

```json
{
 "mcpServers": {
   "chrome-devtools": {
     "command": "npx",
     "args": ["-y", "@modelcontextprotocol/server-chrome-devtools"],
     "env": {
       "ALLOWED_ORIGINS": "github.com,localhost:*,127.0.0.1:*,your-domain.com",
       "AUTO_APPROVE_FETCH": "true"
     }
   },
   "playwright": {
     "command": "npx",
     "args": ["-y", "@executeautomation/playwright-mcp-server"],
     "env": {
       "PLAYWRIGHT_ALLOWED_DOMAINS": "github.com,*.github.com"
     }
   }
 }
}
```

## 2. Claude.md Permission Policy

Create a `Claude.md` in your project root with explicit permission grants:

```markdown
# MCP Permission Policy

## Auto-Approved Actions
- **fetch**: All requests to github.com, localhost, 127.0.0.1 are pre-approved
- **browser automation**: Navigation and interaction on development domains
- **bash commands**: Non-destructive read-only operations

## Allowed Origins
- github.com (for fetching repos and docs)
- localhost:* (local dev servers)
- 127.0.0.1:* (local services)
- *.github.io (GitHub Pages)

## Restricted Actions (require confirmation)
- File system writes outside /tmp/
- Network requests to external APIs
- Git push/PR creation
```

## 3. For the AI Bash Loop (ralph-wiggum)

The "ralph-wiggum" pattern from awesomeclaude uses a `.claude-ops` config. Add:

```bash
# .claude-ops/config.sh
export CLAUDE_AUTO_APPROVE_DOMAINS="github.com,localhost,127.0.0.1"
export CLAUDE_PERMISSION_LEVEL="trusted"
export MCP_CHROME_DEVTOOLS_AUTO_APPROVE="true"
```

Then in your loop script, source it before launching Claude.

## 4. Tool-Specific Setup

### Chrome DevTools MCP
```bash
# Install with auto-approve flag
npm install -g @modelcontextprotocol/server-chrome-devtools
export CHROME_DEVTOOLS_AUTO_APPROVE_FETCH=true
```

### Playwright MCP
```javascript
// In your playwright.config.js
const config = {
 use: {
   contextOptions: {
     permissions: ['clipboard-read', 'clipboard-write']
   }
 },
 mcp: {
   autoApproveDomains: ['github.com', 'localhost']
 }
};
```

### Openspec/Devtools
If you're using custom devtools, add this to your server initialization:
```typescript
// In your MCP server code
server.setRequestHandler(CallToolRequestSchema, async (request) => {
 // Auto-approve fetch requests to trusted origins
 if (request.params.name === 'fetch' && isTrustedOrigin(request.params.arguments.url)) {
   return { autoApprove: true, ... };
 }
});
```

## 5. Normal Workflow (Best Practice)

**Don't globally auto-approve everything.** Instead:

1. **Project-specific approval**: Use `.claude/config.json` per project:
```json
{
 "permissions": {
   "autoApprove": ["fetch:github.com", "browser:localhost"],
   "requireConfirm": ["filesystem:write", "git:push"]
 }
}
```

2. **Session-based**: Launch Claude with a permission preset:
```bash
claude --permission-profile=dev-mode --allow-domains=github.com,localhost
```

3. **Interactive learning**: For the first few requests, manually approve with "Yes, and don't ask again for github.com" so Claude learns your preferences.

4. **Audit trail**: Keep a log:
```bash
# .claude/permission-log.json
{
 "approved": ["2025-01-13T10:30:00Z - fetch:github.com/AshDevFr/mcp-chrome-devtools"],
 "autoApprovedOrigins": ["github.com", "localhost"]
}
```

## Quick Fix for Immediate Use

Run Claude with this environment variable:
```bash
export ANTHROPIC_MCP_AUTO_APPROVE_DOMAINS="github.com,localhost,127.0.0.1"
claude
```

This bypasses prompts for specified domains in most MCP implementations.

**Security note**: Only auto-approve safe, read-only origins. Never auto-approve requests to production APIs, payment services, or personal data sources.
```
